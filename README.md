# Концепция приложения для визуализации модулей и доменных областей

## Запуск прототипа

В репозитории добавлен интерактивный прототип на React с визуализацией графа модулей, фильтрами и аналитикой. Выберите подходящий способ запуска.

### Вариант 1. Готовый `.exe` (ничего устанавливать не нужно)

> Бинарники не хранятся в Git, потому что некоторые хостинги отклоняют коммиты с крупными `.exe`. Артефакт публикуется в разделе **Releases** репозитория.

1. Перейдите в раздел **Releases** проекта на GitHub и скачайте файл `domain-graph.exe` из последнего релиза.
2. Поместите его в папку [`release/`](./release) рядом с этим README.
3. Откройте корень проекта и запустите [`run-domain-graph.bat`](./run-domain-graph.bat) **двойным кликом**. Скрипт проверит наличие исполняемого файла, запустит его и откроет приложение в браузере по адресу `http://localhost:4173`.
4. Чтобы остановить приложение, закройте консольное окно, которое появится после запуска.

> Если Windows поместил скачанный `.exe` в карантин, откройте свойства файла, нажмите «Разблокировать» и повторите запуск.

### Вариант 2. Разработка с Node.js

Установите [Node.js 18+](https://nodejs.org/en/download) (это автоматически добавит команду `npm`). Далее выполните в папке проекта:

```bash
npm install
npm run dev
```

После старта приложение будет доступно по адресу `http://localhost:5173`. Сборка готовой версии выполняется командой `npm run build`, предпросмотр — `npm run preview`.

### Пересборка исполняемого файла

Если потребуется пересобрать Windows-бандл (например, после изменения кода), выполните:

```bash
npm run build:exe
```

Команда выполнит сборку фронтенда и упакует минимальный HTTP-сервер в `release/domain-graph.exe`. Для кастомного порта задайте переменную окружения `PORT`, автозапуск браузера можно отключить переменной `NO_AUTO_OPEN=1`.

> После сборки не забудьте удалить или добавить файл в `.gitignore`, чтобы избежать ошибки «бинарные файлы не поддерживаются» при публикации.


## Цель
В нефтегазовой компании десятки команд создают различные IT-продукты. Из-за отсутствия общей картины модули нередко дублируют друг друга. Цель веб-приложения — визуализировать модули и доменные области в виде графа, чтобы участники могли находить пересечения, избегать повторной разработки и переиспользовать существующие решения.

## Методология и роли

### Общие принципы
- **Граф знаний на основе онтологии.** Знание представляется как сеть сущностей и отношений, что позволяет находить скрытые связи и выполнять сложные запросы.
- **Стратегический и тактический DDD.** Ограниченные контексты определяют границы предметных областей, а тактический уровень задаёт сущности, агрегаты и сервисы.
- **Централизованное хранилище знаний.** Единая база документации и данных обеспечивает самостоятельный доступ к информации и снижает риск повторной разработки.
- **Итеративное развитие.** Онтология и граф пополняются и уточняются по мере появления новых знаний.

### Роли
| Роль | Ответственность |
| --- | --- |
| **Доменный эксперт** | Формирует структуру доменного дерева, валидирует связи между модулями и доменами. |
| **Аналитик / инженер по знаниям** | Собирает требования, проектирует онтологию, определяет атрибуты и поддерживает модели. |
| **Архитектор** | Определяет границы контекстов, стандарты интеграции и согласованность моделей. |
| **Разработчик / владелец модуля** | Описывает модуль, поддерживает актуальность данных. |
| **Ответственный за качество данных** | Организует ревизии, контролирует модульность и переиспользуемость. |

## Процесс наполнения
1. **Анализ домена.** Определение ключевых субдоменов и потенциальных интеграций.
2. **Формирование доменного дерева.** Построение иерархии областей с помощью онтологических инструментов.
3. **Описание модулей.** Добавление узлов типа «Модуль» с атрибутами и связями с доменами.
4. **Связывание модулей.** Моделирование зависимостей между компонентами.
5. **Ревизия и обновление.** Регулярное уточнение данных и связей.
6. **Обучение и обмен знаниями.** Мероприятия по поддержанию качества данных и распространению знаний.
7. **Использование базы.** Фильтрация и изучение модулей по выбранным доменам через веб-интерфейс.

## Уровни декомпозиции доменных областей
1. **Домен / ограниченный контекст.** Крупные предметные области с собственным языком и моделями (например, добыча, транспортировка, экономика).
2. **Поддомен / объект или процесс.** Ключевые сущности или процессы внутри контекста (скважина, бурение, мониторинг).
3. **Функция / модуль.** Конкретные программные компоненты, связанные с объектами и процессами через отношения «использует», «производит» или «зависит».

## Атрибуты сущностей

### Модуль
- Идентификатор
- Название
- Описание
- Доменные области
- Команда / владелец
- Репозиторий исходного кода
- API / интерфейсы
- Зависимости
- Статус
- Показатели
- Переиспользуемость

### Доменный объект или процесс
- Название
- Тип
- Родитель
- Описание
- Синонимы
- Владелец

### Отношения
- **Использует** — модуль использует доменный объект или другой модуль.
- **Производит** — модуль создаёт данные для доменного объекта.
- **Зависит** — модуль зависит от другого модуля.
- **Связан с** — произвольные дополнительные связи.

## Архитектурные компоненты
- **Хранилище графа.** RDF-триплстор (GraphDB, Stardog) или property-graph база (Neo4j) для хранения данных и выполнения запросов.
- **Слой бизнес-логики.** API для чтения и записи графа, валидация данных, правила доступа, поддержка REST/GraphQL/SPARQL.
- **Модуль импорта данных.** ETL/ELT-инструменты для загрузки описаний систем, автоматического извлечения сущностей и связей.
- **Веб-приложение.** Интерфейс на React с использованием Consta UI и Consta Charts, визуализация графа через Reagraph или альтернативы (Cytoscape.js, React Flow).

## Основные функции веб-приложения
1. Навигация по дереву доменов.
2. Поиск и фильтры по командам, статусам и типам связей.
3. Интерактивная карта графа с различными типами узлов и настройками визуализации.
4. Карточка узла с деталями и возможностью редактирования.
5. Формы добавления и изменения сущностей.
6. История изменений и обсуждения.
7. Аналитика и отчёты с использованием диаграмм.
8. Экспорт и импорт данных.

## Пользовательский сценарий
1. Аналитик выбирает доменные области «Скважины» и «Экономика» и видит связанные модули.
2. Обнаруживает дублирующие функции и сравнивает их параметры.
3. Инициирует обсуждение для объединения усилий.
4. После согласования обновляет граф и статусы модулей.

## Практики управления знаниями
- Ведение единой базы знаний и документации.
- Парное программирование и code review.
- Онбординг и наставничество.
- Кросс-командное взаимодействие.
- Регулярные ревизии процессов и данных.

## Технологический стек
- **GraphDB / Stardog** — для семантических моделей и reasoning.
- **Neo4j** — для высокопроизводительных property-графов (при необходимости с neosemantics).
- **Reagraph** или **Cytoscape.js / React Flow** — библиотеки визуализации графов.
- **Consta UI** и **Consta Charts** — дизайн-система и диаграммы.
- **Protégé / Grafo / WebVOWL** — инструменты моделирования онтологий.
- **Elasticsearch** — полнотекстовый поиск поверх графовой базы.

## Заключение
Комбинация онтологического моделирования, DDD и современных инструментов визуализации позволяет построить приложение, которое снижает дублирование, ускоряет поиск решений и развивает культуру обмена знаниями в организации.
