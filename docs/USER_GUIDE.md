# Пользовательская инструкция

## Назначение приложения
Веб-приложение предназначено для визуализации корпоративной ИТ-экосистемы в виде интерактивного графа. Пользователь получает целостное представление о доменных областях, модулях и артефактах данных, может изучать детальные карточки сущностей, анализировать взаимосвязи и готовить аналитические отчёты для принятия решений. 【F:src/App.tsx†L49-L170】【F:src/components/GraphView.tsx†L15-L156】

## Сущности и их атрибуты
Ниже приведены типы сущностей, отображаемых в системе, и значение каждого атрибута карточки.

### Домен
| Атрибут | Что означает |
| --- | --- |
| **Название** | Официальное наименование доменной области, по которому её легко найти в каталоге. 【F:src/data.ts†L1-L74】 |
| **Описание** | Краткое описание бизнес-функции или набора процессов, относящихся к домену. |
| **Иерархия** | Домен может иметь дочерние области. Включение родительского домена автоматически подключает все дочерние элементы. |

### Модуль
| Атрибут | Что означает |
| --- | --- |
| **Статус** | «В эксплуатации», «В разработке» или «Устаревший» — помогает отслеживать жизненный цикл решения. 【F:src/data.ts†L26-L37】 |
| **Описание** | Ключевые цели и функции модуля. |
| **Доменные области** | Список доменов, в рамках которых работает модуль; влияет на фильтрацию графа. |
| **Название продукта** | Коммерческое или внутреннее имя продукта, который реализует модуль. |
| **Команда** | Основная команда сопровождения (название подразделения или проектной группы). |
| **Владелец РИД** | Компания и подразделение, отвечающие за права на результаты интеллектуальной деятельности. |
| **Локализация функции** | Бизнес-процесс или зона ответственности, где модуль приносит ценность. |
| **Использование компаниями** | Статистика по количеству компаний и лицензий, использующих модуль, что помогает оценить охват и нагрузку. |
| **Технологический стек** | Список ключевых технологий, библиотек и платформ, на которых построен модуль. |
| **Команда проекта** | Поимённый состав участников с ролями (владелец продукта, архитекторы, разработчики, тестировщики). |
| **Данные In** | Перечень входящих артефактов и модулей-источников, необходимых для расчётов. |
| **Данные Out** | Результирующие артефакты, которые модуль формирует для других систем, с указанием потребителей. |
| **Формула расчёта** | Ключевой алгоритм или бизнес-правило, которым руководствуется модуль. |
| **Репозиторий / API / документация** | Ссылки на Git-репозиторий, спецификации, технический дизайн и схемы. |
| **Интеграция с сервером лицензирования** | Показывает, подключён ли модуль к корпоративному учёту лицензий. |
| **Перечень библиотек** | Версионированный список зависимостей, упрощающий аудит. |
| **Тип клиента** | Desktop или Web-интерфейс — помогает поддержке выбирать сценарии развёртывания. |
| **Средство развертывания** | Используемая платформа автоматизации (Docker или Kubernetes). |
| **Метрики** | Количество тестов, процент покрытия и уровень автоматизации, позволяющие оценить качество. |
| **Нефункциональные требования** | Целевые показатели по времени отклика, пропускной способности и ресурсам. |

### Артефакт
| Атрибут | Что означает |
| --- | --- |
| **Описание** | Назначение и содержимое данных. |
| **Доменная область** | Контекст, к которому относится артефакт, что помогает понимать владельцев и ограничения. |
| **Модуль-источник** | Система, которая формирует артефакт. При клике можно перейти к карточке модуля. |
| **Модули-потребители** | Решения, использующие артефакт, позволяющие быстро проследить цепочку зависимости. |
| **Тип данных** | Категория контента (инженерные данные, телеметрия, управляющие команды и т.д.). |
| **Пример данных** | Ссылка на образец или тестовый набор для быстрой проверки формата. 【F:src/components/NodeDetails.tsx†L62-L208】 |

## Запуск интерфейса
1. Получите ссылку на окружение. Для локального запуска выполните `npm run dev`, затем перейдите по адресу `http://localhost:5173`. 【F:README.md†L17-L63】
2. Проверьте, что администратор запустил сервис хранения снапшотов (`npm run server`) и предоставил доступ к нужному графу.
3. При открытии страницы дождитесь загрузки списка доступных графов и текущего снапшота (индикатор в панели «Управление снапшотом»). 【F:src/App.tsx†L62-L209】

## Структура интерфейса
- **Верхняя панель** — выбор графа, управление снапшотами, поисковая строка и переключение вкладок.
- **Левая колонка** — фильтры, дерево доменов и набор быстрых пресетов.
- **Центральная область** — отображение графа, аналитических панелей или административных форм в зависимости от выбранной вкладки.
- **Правая панель** — карточка выбранной сущности, включающая все атрибуты и ссылки. 【F:src/App.tsx†L39-L170】

## Работа со вкладками
1. **Связи** — основной режим с интерактивным графом. Можно перетаскивать узлы, масштабировать колесом мыши, выделять связи и просматривать карточки. 【F:src/components/GraphView.tsx†L27-L156】
2. **Статистика** — аналитические панели Consta Charts с распределением по статусам, типам артефактов, трендами переиспользования, картой команд и списками приоритетных действий. Каждая диаграмма поддерживает подсказки при наведении и фильтрацию по легенде. 【F:src/components/StatsDashboard.tsx†L60-L209】
3. **Администрирование** — формы создания и редактирования модулей, доменов и артефактов; доступны только уполномоченным пользователям (см. административную инструкцию). 【F:src/components/AdminPanel.tsx†L94-L447】

## Фильтрация данных и поиск
- **Поисковая строка**: вводите название модуля, команды или владельца, чтобы мгновенно подсветить совпадающие узлы. Поиск распространяется и на карточки; найденные элементы подсвечиваются в списках. 【F:src/components/FiltersPanel.tsx†L14-L65】
- **Статусы**: отметьте один или несколько статусов, чтобы сузить граф по стадиям жизненного цикла. Серый индикатор у узла означает, что он скрыт фильтром. 【F:src/components/FiltersPanel.tsx†L67-L111】
- **Продукты и компании**: выберите конкретные продукты или компании-владельцев, чтобы увидеть только связанные с ними модули и их артефакты. Это полезно для анализа портфеля. 【F:src/components/FiltersPanel.tsx†L113-L162】
- **Связи между продуктами**: переключатель «Показывать связи между продуктами» позволяет временно скрыть межпродуктовые зависимости, чтобы сфокусироваться на внутренних взаимодействиях. 【F:src/components/FiltersPanel.tsx†L164-L194】
- **Сброс**: кнопка «Сбросить фильтры» очищает все условия и возвращает полный набор данных. 【F:src/components/FiltersPanel.tsx†L186-L194】

## Дерево доменов
1. Раскройте нужную ветку дерева, чтобы увидеть дочерние области.
2. Установите флажок у домена — на графе останутся только связанные с ним сущности; дочерние домены включаются автоматически.
3. Полузакрашенный чекбокс показывает, что выбрана лишь часть дочерних доменов. Используйте его для быстрого обзора перекрывающихся областей. 【F:src/components/DomainTree.tsx†L1-L71】

## Работа с графом
1. **Навигация**: удерживайте левую кнопку мыши для панорамирования, используйте колесо мыши или жесты трекпада для масштабирования. Позиции узлов сохраняются автоматически вместе со снапшотом. 【F:src/components/GraphView.tsx†L27-L156】
2. **Выбор узлов**: кликните на узел, чтобы открыть карточку. Щёлкните по пустой области или нажмите `Esc`, чтобы снять выделение. 【F:src/App.tsx†L136-L209】
3. **Фокусировка**: двойной клик по узлу центрирует камеру и раскрывает связанные сущности. Повторное действие возвратит стандартный масштаб.
4. **Связи**: при наведении подсвечивается цепочка взаимодействий, что помогает быстро понять направление потоков данных.

## Карточка сущности
- Секции карточки можно разворачивать и сворачивать. Зажмите `Ctrl` при клике по заголовку, чтобы оставить открытой только одну секцию. 【F:src/components/NodeDetails.tsx†L14-L208】
- Для модулей отображаются блоки «Общая информация», «Расчётный узел», «Техническая информация», «Нефункциональные требования» с подробным описанием каждого атрибута (см. таблицы выше).
- Для артефактов доступны быстрые переходы к модулю-источнику и потребителям.
- Для доменов отображается текстовое описание области; если описания нет, поле помечено как «Не заполнено».

## Управление снапшотами
1. **Экспорт**: сохраните текущее состояние графа в JSON, чтобы поделиться раскладкой или подготовить бэкап. Файл включает версии данных и координаты узлов. 【F:src/components/GraphPersistenceControls.tsx†L17-L75】
2. **Импорт**: загрузите JSON-файл с другого окружения. Перед импортом система проверяет структуру, версию (`GRAPH_SNAPSHOT_VERSION`) и количество сущностей, чтобы избежать несовместимых данных. 【F:src/components/GraphPersistenceControls.tsx†L77-L145】【F:src/types/graph.ts†L5-L40】
3. **Копирование между графами**: выберите граф-источник, отметьте типы сущностей (домены, модули, артефакты) и запустите перенос. Операция полезна для синхронизации стендов. 【F:src/components/GraphPersistenceControls.tsx†L147-L225】
4. Статус каждой операции отражается в верхней панели: зелёный индикатор — успех, жёлтый — выполнение, красный — ошибка (например, при недоступности сервера). 【F:src/App.tsx†L182-L209】

## Аналитический режим
- **Карточка показателей**: отображает количество модулей, артефактов и продуктов, а также агрегированные метрики автоматизации и качества. Используйте её для быстрого состояния портфеля. 【F:src/components/StatsDashboard.tsx†L60-L164】
- **Диаграмма статусов**: помогает увидеть баланс между активными и устаревшими решениями и планировать обновления.
- **Распределение артефактов**: показывает, в каких доменах сосредоточены данные; можно навести для просмотра абсолютных значений.
- **Тренд переиспользования**: график, демонстрирующий динамику повторного использования артефактов различными командами.
- **Карта команд и клиентов**: heatmap по командам и компаниям; полезна для оценки нагрузки и поддержки. 【F:src/components/StatsDashboard.tsx†L116-L209】
- **Списки действий**: блоки «Домены без модулей» и «Топ команд» подсказывают, где требуется усилить развитие или поддержку.

## Режим администрирования
1. Выберите сущность в выпадающем списке: «Модули», «Домены» или «Артефакты». Первый пункт списка — создание новой сущности. 【F:src/components/AdminPanel.tsx†L94-L140】
2. Заполните форму: поля сгруппированы по смыслу, доступны выпадающие списки, чекбоксы и ссылки. В подсказках к каждому полю указано, какие данные ожидаются (например, `https://` для URL). 【F:src/components/AdminPanel.tsx†L142-L289】
3. Нажмите «Сохранить» для отправки изменений или «Удалить», чтобы удалить сущность. После успешной операции граф и статистика обновляются автоматически. 【F:src/components/AdminPanel.tsx†L291-L447】

## Уведомления и ошибки
- Успешные действия сопровождаются зелёными бейджами и сообщениями «Сохранено» или «Экспорт выполнен».
- При ошибках отображается красное уведомление с текстом проблемы (например, «Сервис недоступен»). Проверьте соединение или повторите операцию позже. 【F:src/App.tsx†L182-L270】
- Если сервис хранения временно недоступен, приложение переключится в автономный режим: данные загружаются из демо-набора, но изменения не сохраняются до восстановления соединения. 【F:src/App.tsx†L215-L270】

## Советы по работе
- Используйте раскладку узлов как рабочую карту: после логического распределения областей выполните экспорт, чтобы сохранить результат и поделиться с коллегами.
- Перед демонстрацией отключите лишние фильтры и очистите выделение, чтобы граф отобразился целиком.
- При анализе цепочек данных сначала выберите артефакт, затем перейдите к модулю-потребителю, чтобы увидеть, какие входные данные ему требуются.
- Обновляйте страницу (`F5`), если граф отображается некорректно — после перезагрузки подтянется последняя сохранённая раскладка.
